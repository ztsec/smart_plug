# 操作存放在机房的Kungfu平台的策略

## 示例策略

为了演示插件功能，在python目录中放置了一个示例的机房策略，使用客户端的【功夫】功能创建并上传策略，可以完整演示本插件的功能。

上传前请修改`strategy_demo.py`文件的第6行，改为你使用的资金账户。

注意：本示例会调用下单接口，所以请在测试环境中使用！！

假设上传时设置的策略id为`demo`，方便后文讨论

## 权限声明

插件想要操作哪类机房策略，需要在程序清单（package.json）的`rely_items`字段中声明。

例如
插件需要配合策略strategyA使用，且需要满足策略版本是1.1.0版本以上；同时需要配合策略strategyB，但是没有版本要求

则需要配置如下

```json
{
    // ....

    "rely_items": {
        "strategyA": "^1.1.0",
        "strategyB": "*"
        // ....
    }

    // ....
}
```

推荐在程序清单中将所有的机房策略都声明，这样可以帮助插件的使用者区分插件的风险与适用范围。

如果你编写是适合任何策略的通用型插件，可以在清单中如下配置。

```json
    "rely_items": {
        "*": "*"
    }
```

版本号的写法可以是任何语义化版本号semver。

## 策略的创建和删除

在SDK中提供的api暂时还不支持策略的创建和删除。我们希望开发者对策略的控制更多的是启停和运行过程中的消息交互，而非创建删除这种操作。

如果需要对策略进行创建和删除，请在客户端的【功夫】模块进行手动操作。

## 获取策略的交易数据

从策略对象（Strategy）的属性中可以直接获取当前策略的交易数据

* 委托 strategy_order_list
* 成交 strategy_trade_list
* 持仓 strategy_position_list
* 资产 book

注意，访问属性前必须调用调用一次 loadData 方法进行数据加载，否则只能得到空数据。
因为默认从`account.strategy_map`中获取的策略对象，是没有这些交易数据的。
